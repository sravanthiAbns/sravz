using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;
using System.Data.SqlClient;

namespace lab1
{
    public partial class Form1 : Form
    {
        static SqlConnection con = null;
        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            con = new SqlConnection(@"Data Source =.\sqlexpress; Initial Catalog = Training; Integrated Security = True");
            con.Open();
        }

        private void btn_query_Click(object sender, EventArgs e)
        {
            try
            {
                SqlDataReader dreader = null;
                //The Procedure to execute
                SqlCommand cmd = new SqlCommand("GetEmployeeById", con);
                cmd.CommandType = CommandType.StoredProcedure;
                //define procedure parameter
                SqlParameter prm;
                prm = new SqlParameter();
                prm.SqlDbType = SqlDbType.Int;
                prm.Direction = ParameterDirection.Input;
                prm.ParameterName = "@eno";
                cmd.Parameters.Add(prm);
                //assign parameter value
                cmd.Parameters["@eno"].Value = int.Parse(txt_EmpNo.Text);
                //execute
                dreader = cmd.ExecuteReader();
                //if employee record found
                if (dreader.Read())
                {
                    txt_EmpName.Text = dreader["empname"].ToString();
                    txt_Sal.Text = dreader["empsal"].ToString();
                    if (dreader["emptype"].ToString() == "P")
                        radioButton_payroll.Checked = true;
                    else
                        radioButton_consultant.Checked = true;
                }
                else
                {
                    btn_New_Click(btn_New, e);
                    MessageBox.Show("No such employee");
                }
                dreader.Close();
            }
            catch (SqlException sqlex)
            {
                MessageBox.Show(sqlex.Message);
            }

        }

        private void btn_New_Click(object sender, EventArgs e)
        {
            txt_EmpNo.Text = "";
            txt_EmpName.Text = "";
            txt_Sal.Text = "";
            txt_EmpNo.Focus();
        }

        private void btn_Save_Click(object sender, EventArgs e)
        {
            try
            {
                SqlCommand com = new SqlCommand("addemp", con);
                com.CommandType = CommandType.StoredProcedure;
                SqlParameter param1,param2,param3,param4;
                param1 = new SqlParameter();
                param1.SqlDbType = SqlDbType.VarChar;
                param1.ParameterName = "@name";

                com.Parameters.Add(param1);

                param2 = new SqlParameter();
                param2.SqlDbType = SqlDbType.Real;
                param2.ParameterName = "@sal";
                com.Parameters.Add(param2);

                param3 = new SqlParameter();
                param3.SqlDbType = SqlDbType.Char;
                param3.ParameterName = "@type";
                com.Parameters.Add(param3);

                param4 = new SqlParameter();
                param4.SqlDbType = SqlDbType.Int;
                param4.ParameterName = "@nextid";
                param4.Direction = ParameterDirection.Output;
                com.Parameters.Add(param4);

                com.Parameters["@name"].Value = txt_EmpName.Text;
                com.Parameters["@sal"].Value = Convert.ToDouble(txt_Sal.Text);
                com.Parameters["@type"].Value = radioButton_payroll.Checked == true ? "P" : "C";

                com.ExecuteNonQuery();
                txt_EmpNo.Text= param4.Value.ToString();
                ////The Insert DML to add employee record
                //SqlCommand cmd = new SqlCommand
                //("insert into employeeAdo values(@eno,@enm,@esal,@etyp)",con);
                ////The Parameters
                //cmd.Parameters.Add("@eno", SqlDbType.Int);
                //cmd.Parameters.Add("@enm", SqlDbType.VarChar, 50);
                //cmd.Parameters.Add("@esal", SqlDbType.Decimal);
                //cmd.Parameters.Add("@etyp", SqlDbType.VarChar, 1);
                ////Assigning Values to parameters
                //cmd.Parameters["@eno"].Value = txt_EmpNo.Text;
                //cmd.Parameters["@enm"].Value = txt_EmpName.Text;
                //cmd.Parameters["@esal"].Value = txt_Sal.Text;
                //cmd.Parameters["@etyp"].Value = radioButton_payroll.Checked == true ? "P" : "C";
                ////Execute Insert ....
                //cmd.ExecuteNonQuery();
                //MessageBox.Show("Employee Details Saved");
            }
            catch (SqlException sqlex)
            {
                MessageBox.Show("Error");
                //MessageBox.Show(sqlex.Message);
            }
        }
    }
}




Stored Procedure:

go
alter procedure addemp @name varchar,@sal numeric(10,2),@type varchar(1),@nextid int out as
begin
--declare @id int;
select TOP(1) @nextid=empno+1 from employeeAdo order by empno desc;
insert into employeeAdo values(@nextid,@name,@sal,@type)
end